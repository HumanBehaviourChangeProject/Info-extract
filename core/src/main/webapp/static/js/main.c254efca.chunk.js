(this["webpackJsonphbcp-prediction-app-v2"]=this["webpackJsonphbcp-prediction-app-v2"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),o=n(4),i=n(5),c=n(7),s=n(6),u=n(13),l=n(31),p=(n(56),n(88),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e="Header"+(this.props.isLoading?" loading":"")+(this.props.hasError?" error":"");return r.createElement("div",{className:e},r.createElement("div",{className:"leftSide"},r.createElement("span",{className:"logo"}),r.createElement("span",null,r.createElement("b",null,"IBM Research \u2022 HBCP")," Prediction App")),r.createElement("div",{className:"rightSide"}))}}]),n}(r.Component)),m=Object(u.b)((function(e){return{isLoading:!1,hasError:!1}}),(function(e){return{}}))(p),d=(n(89),n(43)),f=(n(90),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.category!==this.props.category}},{key:"render",value:function(){return r.createElement("div",{className:"category-name-label"},r.createElement("div",{className:"flex-container"},r.createElement("div",{className:"text-container"},this.props.category),r.createElement("div",{className:"border-arrow"})))}}]),n}(r.Component)),h=(n(91),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.createElement("div",{className:"no-attributes-node"},"No attribute selected")}}]),n}(r.Component)),v=(n(92),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!1}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"plus-node",onClick:function(){return e.props.onOpenCategory()}})}}]),n}(r.Component)),b=(n(93),n(94),n(95),function(e,t){return e===t});function E(e,t,n){var r=n||b;if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!r(e[a],t[a]))return!1;return!0}function y(e,t,n){for(var r=0;r<n.length;r++){for(var a=n[r],o=e,i=t,c=0;c<a.length;c++){var s=a[c];o=o[s],i=i[s]}if(o!==i)return!1}return!0}var g,O=new RegExp(/^-?\d*$/),C=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).numericInput=null,e}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!y(this.props,e,[["stringValue"],["compact"]])}},{key:"updateTempValue",value:function(e){(0===e.length||O.test(e))&&this.props.onValueChange(e)}},{key:"updateStringValue",value:function(e){var t=parseInt(this.props.stringValue);isNaN(t)&&(t=0),this.props.onValueChange((t+e).toString())}},{key:"keyPressed",value:function(e){"Enter"===e.key||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(0===this.props.stringValue.length?("ArrowUp"===e.key&&this.setState({stringValue:"1"}),"ArrowDown"===e.key&&this.setState({stringValue:"-1"})):("ArrowUp"===e.key&&this.updateStringValue(1),"ArrowDown"===e.key&&this.updateStringValue(-1)))}},{key:"preventCursorShift",value:function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),e.stopPropagation())}},{key:"render",value:function(){var e=this;return r.createElement("span",{className:"numeric-selector ".concat(!0===this.props.compact?"compact":""),onClick:function(e){e.preventDefault(),e.stopPropagation()}},r.createElement("input",{type:"text",size:Math.floor(this.props.stringValue.length),value:this.props.stringValue,ref:function(t){e.numericInput=t},onChange:function(t){return e.updateTempValue(t.target.value)},onKeyDown:function(t){e.keyPressed(t),e.preventCursorShift(t)},onKeyUp:function(t){return e.preventCursorShift(t)}}),r.createElement("span",{className:"update-button",onClick:function(){return e.updateStringValue(-1)}},"-"),r.createElement("span",{className:"update-button",onClick:function(){return e.updateStringValue(1)}},"+"))}}]),n}(r.Component),T=(n(96),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.selected!==this.props.selected||!E(e.options,this.props.options)}},{key:"render",value:function(){var e=this;return r.createElement("span",{className:"category-selector ".concat(this.props.compact?"compact":""),onClick:function(e){e.preventDefault(),e.stopPropagation()}},r.createElement("select",{className:"category-selector",value:this.props.selected,onChange:function(t){return e.props.onValueChange(t.target.value)}},this.props.options.map((function(e,t){return r.createElement("option",{key:t,value:e},e)}))))}}]),n}(r.Component)),j=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!y(this.props,e,[["definition","id"],["selection","value"]])}},{key:"render",value:function(){var e,t=this,n=this.props.definition,a=this.props.selection.value.toString();return"numeric"===n.valueType.valueType?e=r.createElement(C,{compact:!0,stringValue:a,onValueChange:function(e){return t.props.onValueChange(e)}}):"category"===n.valueType.valueType&&(e=r.createElement(T,{compact:!0,options:n.valueType.values,selected:a,onValueChange:function(e){return t.props.onValueChange(e)}})),r.createElement("div",{className:"selected-attribute-overview"},n.name,"boolean"===n.valueType.valueType?"":": ",e,r.createElement("div",{className:"close-icon",onClick:function(){return t.props.onClear()}}))}}]),n}(r.Component),N=n(16),S=n.n(N),k=n(28);!function(e){e.REDUX_INIT="@@redux/INIT",e.BOOTSTRAP_DONE="BOOTSTRAP_DONE",e.ATTRIBUTE_SELECTED="ATTRIBUTE_SELECTED",e.ATTRIBUTE_UPDATED="ATTRIBUTE_UPDATED",e.ATTRIBUTE_CLEARED="ATTRIBUTE_CLEARED",e.START_LOADING_RESULTS="START_LOADING_RESULTS",e.FINISH_LOADING_RESULTS="FINISH_LOADING_RESULTS",e.SET_RESULTS="SET_RESULTS",e.CLEAR_RESULTS="CLEAR_RESULTS"}(g||(g={}));var A,w=n(42),I=n.n(w);function U(e){l.b.error(e)}function R(e){l.b.warn(e)}function L(e){return new Promise((function(t){return setTimeout(t,e)}))}var _={type:g.SET_RESULTS,payload:{results:[],predictedOutcomeValue:void 0,followUp:void 0}};function D(e){return function(){var t=Object(k.a)(S.a.mark((function t(n){var r,a,o,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g.START_LOADING_RESULTS}),r=(new Date).getTime(),A=r,a=function(){return A===r},t.next=6,L(200);case 6:if(a()){t.next=8;break}return t.abrupt("return");case 8:return t.prev=8,t.next=11,I.a.post("/api/predict/insights",e);case 11:o=t.sent,i={type:g.SET_RESULTS,payload:o.data},a()&&n(i),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(8),console.error("Impossible to fetch the results.",t.t0),U("Impossible to fetch the results."),a()&&n(_);case 21:return t.prev=21,a()&&n({type:g.FINISH_LOADING_RESULTS}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[8,16,21,24]])})));return function(e){return t.apply(this,arguments)}}()}function V(){return function(){var e=Object(k.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===(r=n().selection).length?t({type:g.CLEAR_RESULTS}):t(D(r));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function x(e,t){var n=e.id,r=e.valueType.valueType;if("numeric"===r){var a=parseInt(t);return{id:n,type:r,value:isNaN(a)?0:a}}return"category"===r?{id:n,type:r,value:t}:{id:n,type:r,value:!0}}function B(e){return function(){var t=Object(k.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={type:g.ATTRIBUTE_CLEARED,payload:{attributeId:e}},n(r),n(V());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function P(e,t){return function(){var n=Object(k.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a={type:g.ATTRIBUTE_UPDATED,payload:{selection:x(e,t)}},r(a),r(V());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var F=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.category!==this.props.category||!E(e.selectedAttributes,this.props.selectedAttributes,(function(e,t){return e.definition.id===t.definition.id&&e.selection.value===t.selection.value}))}},{key:"render",value:function(){var e=this,t=r.createElement(h,null);return this.props.selectedAttributes.length>0&&(t=this.props.selectedAttributes.map((function(t){return r.createElement(j,{key:t.definition.id,definition:t.definition,selection:t.selection,onValueChange:function(n){return e.props.updateAttribute(t.definition,n)},onClear:function(){return e.props.clearAttribute(t.definition.id)}})}))),r.createElement("div",{className:"category-row"},r.createElement(f,{category:this.props.category}),r.createElement(d.a,{className:"attributes-container"},t,r.createElement(v,{onOpenCategory:function(){return e.props.onOpenCategory()}})))}}]),n}(r.Component),H=Object(u.b)((function(e,t){var n=e.categories.find((function(e){return e.name===t.category}));if(void 0===n)throw new Error("Category not found, invalid state.");return{selectedAttributes:e.selection.filter((function(e){return n.attributes.some((function(t){return t.id===e.id}))})).map((function(e){return{definition:n.attributes.find((function(t){return t.id===e.id})),selection:e}}))}}),(function(e){return{clearAttribute:function(t){return e(B(t))},updateAttribute:function(t,n){return e(P(t,n))}}}))(F),G=(n(114),n(159)),q=n(163),M=n(160),z=(n(115),n(116),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={value:r.props.attribute.defaultValue.toString()},r}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!y(e,this.props,[["attribute","id"],["selected"],["value"]])||t.value!==this.state.value}},{key:"handleValueChange",value:function(e){this.props.selected?this.props.updateAttribute(this.props.attribute,e):this.setState({value:e})}},{key:"handleClick",value:function(){var e=this;this.props.selected?this.setState({value:this.props.value},(function(){return e.props.clearAttribute(e.props.attribute.id)})):this.props.selectAttribute(this.props.attribute,this.state.value)}},{key:"render",value:function(){var e,t=this,n=this.props.attribute.enabled,a=this.props.attribute,o=this.props.selected?this.props.value:this.state.value;n&&("numeric"===a.valueType.valueType?e=r.createElement(C,{stringValue:o,onValueChange:function(e){return t.handleValueChange(e)}}):"category"===a.valueType.valueType&&(e=r.createElement(T,{options:a.valueType.values,selected:o,onValueChange:function(e){return t.handleValueChange(e)}})));var i="add-attribute-row";return this.props.selected&&(i+=" selected"),n||(i+=" disabled"),r.createElement("div",{className:i,onClick:function(){return n&&t.handleClick()}},r.createElement("div",{className:"attribute-text"},a.name,"boolean"!==a.valueType.valueType&&n?": ":"",e),r.createElement("div",{className:"plus-box"}))}}]),n}(r.Component)),$=Object(u.b)((function(e,t){return{}}),(function(e){return{selectAttribute:function(t,n){return e(function(e,t){return function(){var n=Object(k.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a={type:g.ATTRIBUTE_SELECTED,payload:{selection:x(e,t)}},r(a),r(V());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))},updateAttribute:function(t,n){return e(P(t,n))},clearAttribute:function(t){return e(B(t))}}}))(z),Q=(n(117),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!0}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"category-switch"},r.createElement("div",{className:"description"},"Showing available attributes for:"),r.createElement("div",{className:"buttons-container"},this.props.categories.map((function(t,n){var a="category-button ".concat(t===e.props.selected?"selected":"");return r.createElement("div",{key:n,className:a,onClick:function(){return e.props.onSwitchCategory(t)}},t)}))))}}]),n}(r.Component)),J=n(161),K=function(e,t){return e.attribute.id===t.attribute.id&&e.selected===t.selected&&e.value===t.value},X=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={showAttributes:!0},r}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.showAttributes!==t.showAttributes||(!y(this.props,e,[["open"],["category"]])||!E(e.selectedAttributes,this.props.selectedAttributes,K))}},{key:"render",value:function(){var e=this,t=this.props.selectedAttributes.filter((function(t){return e.state.showAttributes||t.attribute.enabled})),n=this.props.selectedAttributes.some((function(e){return!1===e.attribute.enabled}));return r.createElement(M.a,{className:"attributes-dialog",anchor:"bottom",open:this.props.open,onClose:this.props.onClose},r.createElement(q.a,{className:"dialog-title"},r.createElement("div",{className:"close-icon",onClick:function(){return e.props.onClose()}}),r.createElement(Q,{categories:this.props.categories,selected:this.props.category,onSwitchCategory:function(t){return e.props.onSwitchCategory(t)}}),r.createElement("div",{className:"hide-menu ".concat(n?"":"disabled")},"Show unavailable attributes",r.createElement(J.a,{checked:this.state.showAttributes,onChange:function(t){return e.setState({showAttributes:t.target.checked})},value:this.state.showAttributes,color:"primary",size:"small"}))),r.createElement(G.a,{className:"dialog-content-container"},r.createElement(d.a,{className:"tags-dialog-menu"},t.map((function(e){return r.createElement($,{key:e.attribute.name,attribute:e.attribute,selected:e.selected,value:e.value})})))))}}]),n}(r.Component),W=Object(u.b)((function(e,t){var n=e.categories.map((function(e){return e.name}));if(void 0===t.category)return{categories:n,selectedAttributes:[]};var r=e.categories.find((function(e){return e.name===t.category}));if(void 0===r)throw new Error("Category ".concat(t.category," not found!"));return{categories:n,selectedAttributes:r.attributes.map((function(t){var n=e.selection.find((function(e){return t.id===e.id}));return{attribute:t,selected:void 0!==n,value:n?n.value.toString():""}}))}}),(function(e){return{}}))(X),Y=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={openCategory:void 0},r}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!E(e.categoryNames,this.props.categoryNames)||t.openCategory!==this.state.openCategory}},{key:"render",value:function(){var e=this,t=0===this.props.categoryNames.length;return r.createElement("div",{className:"category-table"},this.props.categoryNames.map((function(t,n){return r.createElement(H,{key:n,category:t,onOpenCategory:function(){return e.setState({openCategory:t})}})})),t&&r.createElement("div",null,"Loading categories, please wait ..."),r.createElement(W,{category:this.state.openCategory,open:void 0!==this.state.openCategory,onSwitchCategory:function(t){return e.setState({openCategory:t})},onClose:function(){return e.setState({openCategory:void 0})}}))}}]),n}(r.Component),Z=Object(u.b)((function(e){return{categoryNames:e.categories.map((function(e){return e.name}))}}),(function(e){return{}}))(Y),ee=(n(118),n(119),n(120),n(121),n(11)),te=n(162),ne=Object(ee.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:11}}}))(te.a),re=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.result,t=e.isSimilarIntervention,n=e.isSimilarPopulation;return r.createElement("div",{className:"similarity-flags"},r.createElement(ne,{title:t?"Similar intervention":"Different intervention"},r.createElement("span",{className:t?"similar-tag":"different-tag"},r.createElement("span",{className:"intervention-icon"}))),r.createElement(ne,{title:n?"Similar population":"Different population"},r.createElement("span",{className:n?"similar-tag":"different-tag"},r.createElement("span",{className:"population-icon"}))))}}]),n}(r.Component),ae=(n(122),r.createElement("span",{className:"collapsed-icon"})),oe=r.createElement("span",{className:"outcome-icon"}),ie=r.createElement("span",{className:"similar-attributes-icon"}),ce=r.createElement("span",{className:"left-data-icon"}),se=r.createElement("span",{className:"intersection-data-icon"}),ue=r.createElement("span",{className:"right-data-icon"}),le=Object(ee.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:11}}}))(te.a),pe=r.createElement(le,{title:"Behavioural Change Techniques"},r.createElement("span",{className:"bct-text"},"BCTs"));function me(e){var t=[];return e.attributes.forEach((function(e,n){t.push(r.createElement("span",{key:2*n,className:"bct-box"},e))})),r.createElement("div",{className:"bct-container"},r.createElement("span",{className:"bct-title"},0===e.attributes.length?e.noTitle:e.title),t)}var de=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={collapsed:!0},r}return Object(i.a)(n,[{key:"getOutcomeValue",value:function(){return this.props.result.outcomeValue&&-1!==this.props.result.outcomeValue?r.createElement(r.Fragment,null,"Outcome value is ",r.createElement("span",{className:"outcome-value-number"},this.props.result.outcomeValue,"%")," (",this.props.result.followUp,")."):"There is no known outcome value."}},{key:"getSimilarAttributes",value:function(){var e=this.props.result.attributeSimilarities.map((function(e){return"".concat(e.attribute.name," (").concat(e.similarity.toFixed(2),")")}));return r.createElement(me,{title:"Attribute similarities: ",noTitle:"No similar attributes found.",attributes:e})}},{key:"getInterventionsInQuery",value:function(){var e=this.props.result.interventionsOnlyInQuery.map((function(e){return"".concat(e.name.trim())}));return r.createElement(me,{title:r.createElement(r.Fragment,null,pe," queried but not found in arm: "),noTitle:r.createElement(r.Fragment,null,"All the ",pe," specified in the query have a match."),attributes:e})}},{key:"getInterventionsInCommon",value:function(){var e=this.props.result.interventionsInCommon.map((function(e){return"".concat(e.name.trim())}));return r.createElement(me,{title:r.createElement(r.Fragment,null,"Common ",pe," between query and arm: "),noTitle:r.createElement(r.Fragment,null,"No ",pe," in common between query and arm."),attributes:e})}},{key:"getInterventionsInArm",value:function(){var e=this.props.result.interventionsOnlyInArm.map((function(e){return"".concat(e.name.trim())}));return r.createElement(me,{title:r.createElement(r.Fragment,null,"Other ",pe," found in arm: "),noTitle:r.createElement(r.Fragment,null,"All the ",pe," found in the arm have a match."),attributes:e})}},{key:"render",value:function(){var e=this,t=function(e){return r.createElement("span",{className:"table-cell"},e)};return this.state.collapsed?r.createElement("div",{className:"summary-table",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},r.createElement("div",null,t(oe)," ",t(this.getOutcomeValue())),r.createElement("div",null,t(ae),t(r.createElement("span",null,ie," ",ce," ",se," ",ue)))):r.createElement("div",{className:"summary-table",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},r.createElement("div",null,t(oe)," ",t(this.getOutcomeValue())),r.createElement("div",null,t(ie)," ",t(this.getSimilarAttributes())),r.createElement("div",null,t(ce)," ",t(this.getInterventionsInQuery())),r.createElement("div",null,t(se)," ",t(this.getInterventionsInCommon())),r.createElement("div",null,t(ue)," ",t(this.getInterventionsInArm())))}}]),n}(r.Component),fe=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.createElement("li",{className:"single-result-element"},r.createElement(re,{result:this.props.result}),r.createElement("div",{className:"main-container"},r.createElement("div",{className:"title-bar"},r.createElement("span",{className:"document-icon"}),r.createElement("span",{className:"document-name"},this.props.result.title)),r.createElement("div",{className:"summary-container"},r.createElement(de,{result:this.props.result}))))}}]),n}(r.Component),he=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:"results-list-container"},r.createElement("ul",null,this.props.results.map((function(e,t){return r.createElement(fe,{key:e.doc,result:e})}))))}}]),n}(r.Component),ve=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return this.props.hasSelection?r.createElement("div",{className:"results-viewer ".concat(this.props.isLoading?"fetching":"")},r.createElement("i",{className:"fetching-data-spinner fas fa-spinner fa-spin"}),void 0===this.props.results?"Loading results, please wait ...":r.createElement(he,{results:this.props.results})):r.createElement("div",{className:"results-viewer"},"Make a selection to start exploring matching documents.")}}]),n}(r.Component),be=Object(u.b)((function(e){return{results:e.results,isLoading:e.isFetchingResults,hasSelection:e.selection.length>0}}),(function(e){return{}}))(ve);n(123);var Ee=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=void 0!==this.props.followUp,t=void 0!==this.props.value;if((e&&!t||!e&&t)&&R("Follow up and predictected outcome value must be both defined or undefined, mixing not allowed!"),this.props.hasSelection){var n=e?r.createElement(r.Fragment,null,"Predicted outcome value is ",r.createElement("span",{className:"percentage-number"},this.props.value,"%")," (",this.props.followUp,")."):"Predicted outcome value is not available.";return r.createElement("div",{className:"predicted-outcome-value ".concat(this.props.isLoading?"fetching":"")},r.createElement("i",{className:"fetching-data-spinner fas fa-spinner fa-spin"}),this.props.hasResults?n:"Loading predicted outcome value, please wait ...")}return r.createElement("div",{className:"predicted-outcome-value"},"Make a selection to predict outcome value and associated follow up.")}}]),n}(r.Component),ye=Object(u.b)((function(e){return{value:e.predictedOutcomeValue,followUp:e.followUp,isLoading:e.isFetchingResults,hasSelection:e.selection.length>0,hasResults:void 0!==e.results}}),(function(e){return{}}))(Ee),ge=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.bootstrap()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.createElement("div",{className:"App"},r.createElement(m,null),r.createElement("div",{className:"box"},r.createElement("p",{className:"intro-paragraph"},"Welcome to the Human Behaviour Change Project (HBCP) prediction demo! The HBCP aims to use Artificial Intelligence (AI) to automate the extraction and use of information from behaviour change intervention evaluation reports.\xa0 This demo allows you to estimate a potential smoking quit rate given a set of population features and a intervention.\xa0 Results are based on knowledge automatically extracted from more than 500 intervention evaluation reports.")),r.createElement("div",{className:"box"},r.createElement(Z,null)),r.createElement("div",{className:"box"},r.createElement(ye,null)),r.createElement("div",{className:"box"},r.createElement(be,null)),r.createElement(l.a,{toastClassName:"custom-toast-message",className:"custom-toast-container",position:"bottom-center",autoClose:3e3,hideProgressBar:!0,pauseOnHover:!0,closeOnClick:!0,pauseOnFocusLoss:!1}))}}]),n}(r.Component),Oe=Object(u.b)((function(e){return{}}),(function(e){return{bootstrap:function(){return e(function(){var e=Object(k.a)(S.a.mark((function e(t,n){var r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/predict/options/allbytype");case 3:return r=e.sent,a={type:g.BOOTSTRAP_DONE,payload:r.data},e.abrupt("return",t(a));case 8:e.prev=8,e.t0=e.catch(0),console.error("Impossible to bootstrap: ",e.t0),U("Impossible to bootstrap.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())}}}))(ge),Ce=(n(124),n(125),n(37)),Te=n(70),je=n.n(Te),Ne=n(71),Se=n(48),ke=n(22),Ae=n(51),we=n.n(Ae),Ie=function(e,t){switch(t.type){case g.REDUX_INIT:return e;case g.BOOTSTRAP_DONE:return Object(ke.a)(Object(ke.a)({},e),t.payload);case g.ATTRIBUTE_SELECTED:return we()(e,{selection:{$push:[t.payload.selection]}});case g.ATTRIBUTE_UPDATED:var n=e.selection.findIndex((function(e){return e.id===t.payload.selection.id}));return we()(e,{selection:Object(Se.a)({},n,{$set:t.payload.selection})});case g.ATTRIBUTE_CLEARED:return we()(e,{selection:{$set:e.selection.filter((function(e){return e.id!==t.payload.attributeId}))}});case g.START_LOADING_RESULTS:return Object(ke.a)(Object(ke.a)({},e),{},{isFetchingResults:!0});case g.FINISH_LOADING_RESULTS:return Object(ke.a)(Object(ke.a)({},e),{},{isFetchingResults:!1});case g.SET_RESULTS:return Object(ke.a)(Object(ke.a)({},e),{},{results:t.payload.results,predictedOutcomeValue:t.payload.predictedOutcomeValue,followUp:t.payload.followUp});case g.CLEAR_RESULTS:return Object(ke.a)(Object(ke.a)({},e),{},{results:void 0});default:return console.warn("Action ignored: ",t),R("A redux action has been ignored, please check console."),e}};n(126);var Ue=function(){var e={categories:[],selection:[],isFetchingResults:!1,results:void 0},t=Object(Ce.a)(Ne.a,je.a);return Object(Ce.c)(Ie,e,t)}();a.render(r.createElement(u.a,{store:Ue},r.createElement(Oe,null)),document.getElementById("root"))},77:function(e,t,n){e.exports=n(127)},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.c254efca.chunk.js.map